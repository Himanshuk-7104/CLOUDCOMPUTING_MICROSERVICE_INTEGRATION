Integrated Microservices Project: Auth, Notification & Feedback
This project demonstrates the integration of three distinct microservices using Docker and Docker Compose. The services include user authentication with MFA, email notifications, and a student feedback system.
GitHubRepository:[https://github.com/Malleshappa-Patil/integrated-microservices.git](https://github.com/Malleshappa-Patil/integrated-microservices.git)

 Overview
The goal of this project is to simulate a real-world scenario where different functionalities are handled by separate, independently deployable microservices, all orchestrated to work together locally using containerization.

The integrated system consists of:
1. Authentication Service: Handles user login (email/password) via a backend API and Supabase.
2. Notification Service: Manages Multi-Factor Authentication (MFA) by generating and emailing One-Time Passwords (OTPs) using Gmail SMTP. Also serves a basic status page.
3. Feedback Service: Allows mentors to submit performance feedback for students and students/admins to view feedback. Uses FastAPI and MongoDB.
4. Web Frontend: A React-based single-page application providing the user interface for login and MFA, served via Nginx.

## Architecture

This project follows a microservice architecture, containerized using Docker and orchestrated using Docker Compose.

- Services: 4 application services (auth-frontend, auth-backend, notification-service, feedback-service) + 1 database service (feedback-db)
- Containerization: Each service runs in its own isolated Docker container, built from a dedicated Dockerfile
- Orchestration: docker-compose.yml defines all services, networks, ports, volumes, environment variables, and dependencies, enabling single-command startup and shutdown
- Networking: All containers run on a shared Docker bridge network (student-app-network), allowing communication via service names (e.g., feedback-service connects to feedback-db using mongodb://feedback-db:27017)
- External Dependencies:
  - Supabase: Used by auth-backend for user authentication data persistence. Requires a Supabase project URL and Anon key.
  - Gmail SMTP: Used by notification-service to send OTP emails. Requires a Gmail account with 2-Step Verification enabled and an App Password.
- Database: MongoDB (running in a container mongo:7.0) used by feedback-service. Data is persisted using a Docker named volume (mongodb_data)

## Core Docker Concepts Used

- Dockerfile: A text file acting as a blueprint for building a Docker image. Each service has its own, specifying:
  - FROM: The base image providing the OS and runtime (e.g., node:18-alpine, python:3.9-slim-buster)
  - WORKDIR: The current directory inside the image/container
  - COPY: Transfers files (code, config, requirements) from the host into the image
  - RUN: Executes commands during the build (e.g., pip install, npm install, apt-get install)
  - EXPOSE: Documents the port the application listens on inside the container
  - CMD / ENTRYPOINT: Specifies the default command to run when the container starts
- Docker Image: A read-only template created from a Dockerfile, containing the application code, libraries, dependencies, and runtime
- Docker Container: A runnable instance of an image. It's an isolated environment where the application process runs
- Docker Compose (docker-compose.yml): A tool and file format for defining and running multi-container Docker applications. It simplifies managing the services, networks, volumes, and configuration needed for all parts of the application to work together
- Docker Networking: Compose automatically sets up a custom bridge network, allowing containers to resolve each other using their service names as hostnames (e.g., feedback-db)
- Port Mapping (ports:): Exposes a container's internal port to a port on the host machine, making the service accessible externally (e.g., "8080:80" maps host port 8080 to container port 80)
- Volumes (volumes:): Used to persist data generated by containers (like the MongoDB database) outside the container's lifecycle, using named volumes (mongodb_data)
- Environment Variables (environment: & .env): A secure way to pass configuration and secrets (API keys, passwords, URLs) into containers without hardcoding them. Values are typically stored in a .env file and referenced in docker-compose.yml

## Microservice Details

Detailed descriptions of each service, including technologies and integration points.

*(Keep your existing service breakdown for auth-frontend, auth-backend, notification-service, feedback-service, feedback-db here.)*

## Integration Strategy Summary

- Orchestration: Docker Compose (docker-compose.yml) defines and manages the lifecycle and configuration of all services
- Networking: A shared bridge network (student-app-network) allows services to communicate via their defined service names (e.g., feedback-db, auth-backend)
- API Communication: Services interact primarily through RESTful HTTP APIs. The frontend communicates with backends via exposed host ports or through an Nginx proxy. Backend services communicate via service names over the Docker network
- Configuration: Environment variables (.env file) are used to manage external service credentials (Supabase, SMTP) and internal connection strings (MongoDB)
- Frontend Linking: Simple client-side redirection (window.open) links the authenticated user from the login app to the other service UIs

## Health Checks & Error Handling

- Health Checks:
  - docker-compose ps (or docker ps) shows the basic STATUS (Up, Restarting, Exited) of each container
  - An explicit healthcheck: is defined for the feedback-db service in docker-compose.yml. It uses mongosh to ping the database internally. A status of Up (healthy) indicates this check is passing
  - This health check is used with depends_on: ... condition: service_healthy in the feedback-service to ensure it only starts after the database is confirmed ready
  - Health checks could be added to other backend services (by adding /health endpoints in their code and healthcheck: definitions in the compose file) for more detailed status monitoring
- Error Handling:
  - Container Crashes: Docker Compose uses the restart: unless-stopped policy to automatically restart any container whose main process exits unexpectedly (e.g., due to an unhandled code error)
  - Application Errors: Errors within the running application (e.g., invalid password, failed email send, database query error) must be handled in the application code (try...except, try...catch, error responses). Docker Compose does not handle these
  - Diagnosis: Identifying the root cause of errors primarily relies on checking the logs of the specific service container using docker logs <service_name>. Tracebacks and error messages printed there are essential for debugging

## Getting Started

### Prerequisites

- Docker Engine ([Install Docker](https://docs.docker.com/engine/install/))
- Docker Compose (Usually included with Docker Desktop, otherwise [install separately](https://docs.docker.com/compose/install/))
- Git ([Install Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git))
- A Google Account with 2-Step Verification enabled (to generate an App Password)
- A Supabase Account and a (free tier) Project ([Sign up/Login](https://app.supabase.com/))

### Running the Application

1. Clone the Repository:
    ```bash
    git clone https://github.com/Malleshappa-Patil/integrated-microservices.git
    cd integrated-microservices
    ```

2. Create Configuration File (.env):
    In the root directory (integrated-microservices), create a file named `.env`.  
    Copy the following content into it:
    ```dotenv
    SUPABASE_URL=YOUR_SUPABASE_PROJECT_URL
    SUPABASE_ANON_KEY=YOUR_SUPABASE_ANON_KEY

    SMTP_SERVER=smtp.gmail.com
    SMTP_PORT=587
    SMTP_USERNAME=your_actual_email@gmail.com
    SMTP_PASSWORD=your_16_character_google_app_password
    SENDER_EMAIL=your_actual_email@gmail.com
    ```

3. Update .env Values:
    - Replace placeholders with your actual Supabase and Gmail credentials
    - Make sure you use a Google App Password, not your main Gmail password

4. Create Supabase User:
    - Go to your Supabase project dashboard -> Authentication -> Users -> Add user
    - Create a user with email and password youâ€™ll use to log in

5. Build and Start Containers:
    ```bash
    docker-compose up --build -d
    ```

6. Access Services:
    - Login Application: http://localhost:8080
    - Notification Service (Status Page): http://localhost:5001
    - Feedback Service (HTML UI): http://localhost:8000
    - Feedback Service (API Docs): http://localhost:8000/docs

7. Test the Flow:
    - Log in using Supabase credentials
    - Complete MFA via email
    - Use redirect buttons to access other services

8. Stop the Application:
    ```bash
    docker-compose down
    ```
    - To remove database volume:
    ```bash
    docker-compose down -v
    ```

## Contributing

*(Optional: Add details if you want others to contribute)*

## License
